# ğŸš€ í•«ë”œ ë°ì´í„° ìë™ ì—…ë°ì´íŠ¸ - GitHub Actions
name: Update Hotdeals

on:
  schedule:
    # ë§¤ 5ë¶„ë§ˆë‹¤ ì‹¤í–‰ (GitHub Actions ìµœì†Œ ê°„ê²©)
    - cron: '*/5 * * * *'
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ë„ ê°€ëŠ¥
    
jobs:
  update-deals:
    runs-on: ubuntu-latest
    
    steps:
      - name: Update Hotdeal Data
        run: |
          echo "ğŸ”„ í•«ë”œ ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹œì‘..."
          
          # API í˜¸ì¶œë¡œ ë°ì´í„° ì—…ë°ì´íŠ¸
          response=$(curl -s -w "%{http_code}" "https://hotdeal-nextjs.vercel.app/api/update-deals")
          http_code=$(echo "$response" | tail -n1)
          
          if [ "$http_code" -eq 200 ]; then
            echo "âœ… í•«ë”œ ë°ì´í„° ì—…ë°ì´íŠ¸ ì„±ê³µ!"
          else
            echo "âŒ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ (HTTP $http_code)"
            exit 1
          fi
          
      - name: Ping Main API  
        run: |
          echo "ğŸ“ ë©”ì¸ API ì›Œë°ì—…..."
          curl -s "https://hotdeal-nextjs.vercel.app/api/deals" > /dev/null
          echo "âœ… API ì›Œë°ì—… ì™„ë£Œ!"

      - name: Update Status
        run: |
          echo "ğŸ“Š ì—…ë°ì´íŠ¸ ì™„ë£Œ ì‹œê°„: $(date)"
          echo "ğŸ”— ì‚¬ì´íŠ¸: https://hotdeal-nextjs.vercel.app"